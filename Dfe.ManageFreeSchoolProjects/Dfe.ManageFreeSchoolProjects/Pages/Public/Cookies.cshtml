@page "/public/cookies"
@using Microsoft.AspNetCore.Authorization
@attribute [AllowAnonymous]
@model Dfe.ManageFreeSchoolProjects.Pages.Public.Cookies

@{
    ViewBag.Title = "Cookies";
    Layout = "Shared/_Layout";
}

@section BeforeMain {
    <div role="navigation" class="govuk-width-container">
        <a href="@Model.returnPath" class="govuk-back-link">Back</a>
    </div>
}

@if (Model.PreferencesSet)
{
    <div class="govuk-notification-banner govuk-notification-banner--success" role="alert"
        aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
        <div class="govuk-notification-banner__header">
            <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                Success
            </h2>
        </div>
        <div class="govuk-notification-banner__content">
            <p class="govuk-notification-banner__heading">
                Youâ€™ve set your cookie preferences. <a class="govuk-notification-banner__link"
                    data-test="success-banner-return-link" href="@Model.returnPath">Go back to the page you were looking
                    at</a>.
            </p>
        </div>
    </div>
}

<h1 class="govuk-heading-xl">Cookie preferences</h1>
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <p class="govuk-body">
            Cookies are small files saved on your phone, tablet or computer when you visit a website.
        </p>

        <p class="govuk-body">
            We use cookies to make this website work and collect information about how you use it.
        </p>

        <h2 class="govuk-heading-l">Essential cookies</h2>
        <p class="govuk-body">
            Essential cookies keep your information secure while you use this service. We do not need
            to ask permission to use them
        </p>
        <table class="govuk-table" aria-label="Essential cookies">
            <thead class="govuk-table__header">
                <tr>
                    <th class="govuk-table__header">Name</th>
                    <th class="govuk-table__header">Purpose</th>
                    <th class="govuk-table__header">Expires</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                <tr>
                    <td class="govuk-table__cell">ASLBSA</td>
                    <td class="govuk-table__cell">Balances the load on our servers</td>
                    <td class="govuk-table__cell">With browser settings (session)</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">ASLBSACORS</td>
                    <td class="govuk-table__cell">Balances the load on our servers</td>
                    <td class="govuk-table__cell">With browser settings (session)</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.AspNetCore.Antiforgery.VyLW6ORzMgk</td>
                    <td class="govuk-table__cell">Secures you and our website against Cross Site Request Forgery (CSRF)
                    </td>
                    <td class="govuk-table__cell">With browser settings (session)</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.Consent</td>
                    <td class="govuk-table__cell">Stores your consent to optional cookies</td>
                    <td class="govuk-table__cell">One year</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.Login</td>
                    <td class="govuk-table__cell">Keeps you signed in</td>
                    <td class="govuk-table__cell">With browser settings (session)</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.LoginC1</td>
                    <td class="govuk-table__cell">Keeps you signed in</td>
                    <td class="govuk-table__cell">With browser settings (session)</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.LoginC2</td>
                    <td class="govuk-table__cell">Keeps you signed in</td>
                    <td class="govuk-table__cell">With browser settings (session)</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.PageCache.DFC1</td>
                    <td class="govuk-table__cell">Saves your filter options</td>
                    <td class="govuk-table__cell">With browser settings (session)</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.PageCache.CP1</td>
                    <td class="govuk-table__cell">Saves your answers when you move between pages</td>
                    <td class="govuk-table__cell">One day</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.PageCache.R1</td>
                    <td class="govuk-table__cell">Saves your answers when you move between pages</td>
                    <td class="govuk-table__cell">One day</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">.ManageFreeSchoolProjects.PageCache.BE1</td>
                    <td class="govuk-table__cell">Saves your answers when you move between pages</td>
                    <td class="govuk-table__cell">One day</td>
                </tr>
            </tbody>
        </table>
        <h2 class="govuk-heading-l">Analytics cookies (optional)</h2>

        <h3 class="govuk-heading-s">Google Analytics</h3>
        <p class="govuk-body">With your permission, we use Google Analytics to collect data about how you use this
            website. This information helps us to improve our website.</p>
        <p class="govuk-body">Google Analytics is not allowed to use or share our analytics data with anyone.
            Application Insights stores anonymised information about:</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>how you got to this website</li>
            <li>the pages you visit on this website and how long you spend on them</li>
            <li>any errors you see while using this website</li>
            <li>what you click on while you are visiting the website</li>
        </ul>
        <p class="govuk-body">Google Analytics stores the following cookies:</p>
        <table class="govuk-table" aria-label="Google analytics cookies">
            <thead class="govuk-table__header">
                <tr>
                    <th class="govuk-table__header">Name</th>
                    <th class="govuk-table__header">Purpose</th>
                    <th class="govuk-table__header">Expires</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                <tr>
                    <td class="govuk-table__cell">_ga</td>
                    <td class="govuk-table__cell">Tells you apart from other users</td>
                    <td class="govuk-table__cell"> 2 years</td>
                </tr>
                <tr>
                    <td class="govuk-table__cell">_gat_&lt;container-id&gt;</td>
                    <td class="govuk-table__cell">Remembers your last session</td>
                    <td class="govuk-table__cell">2 years</td>
                </tr>
            </tbody>
        </table>

        <h3 class="govuk-heading-s">Application Insights</h3>
        <p class="govuk-body">We use Azure Application Insights software to collect information about how you use this website. We do this to help make sure the site is meeting the needs of its users and to help us make improvements.</p>
        <p class="govuk-body">Azure Application Insights stores information about:</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>the pages you visit on this website</li>
            <li>how long you spend on each page</li>
            <li>how you got to the site</li>
            <li>what you click on while you're visiting the site</li>
        </ul>
        <p class="govuk-body">We don't allow Microsoft to use or share our analytics data.</p>

        <p class="govuk-body">Azure Application Insights sets the following cookies:</p>
        <table class="govuk-table" aria-label="App Insights cookies">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header">Name</th>
                    <th scope="col" class="govuk-table__header">Purpose</th>
                    <th scope="col" class="govuk-table__header">Expires</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell">ai_session</td>
                    <td class="govuk-table__cell">This helps us track activity happening over a single browser session</td>
                    <td class="govuk-table__cell">1 hour</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell">ai_user</td>
                    <td class="govuk-table__cell">This helps us to identify the number of distinct users accessing the site over time by tracking if you've visited before</td>
                    <td class="govuk-table__cell">1 year</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell">ai_authuser</td>
                    <td class="govuk-table__cell">This helps us to identify authenticated users and how they interact with the site</td>
                    <td class="govuk-table__cell">When you close your browser</td>
                </tr>
            </tbody>
        </table>

        <form method="post">
            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                        <h3 class="govuk-fieldset__heading">
                            Do you want to accept analytics cookies?
                        </h3>
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="cookie-consent-accept" name="consent" type="radio"
                                value="true" checked="@Model.Consent">
                            <label class="govuk-label govuk-radios__label" for="cookie-consent-accept">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="cookie-consent-deny" name="consent" type="radio"
                                value="false" checked="@(Model.Consent == false)">
                            <label class="govuk-label govuk-radios__label" for="cookie-consent-deny">
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>
            <input type="submit" name="commit" value="Save changes" class="govuk-button" data-qa="submit"
                data-module="govuk-button" data-disable-with="Save changes">
        </form>
    </div>
</div>
