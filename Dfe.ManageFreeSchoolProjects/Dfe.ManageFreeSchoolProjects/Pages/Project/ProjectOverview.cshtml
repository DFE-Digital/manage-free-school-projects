@page "/projects/{projectId}/overview"
@using Dfe.ManageFreeSchoolProjects.Constants;
@model Dfe.ManageFreeSchoolProjects.Pages.Project.ProjectOverviewModel

@{
    ViewData["Title"] = "Project overview";
    var projectOverviewLink = string.Format(RouteConstants.ProjectOverview, Model.ProjectId);
    var taskListLink = string.Format(RouteConstants.TaskList, Model.ProjectId);
}

<div class="dfe-content-page--header">
    <div class="dfe-width-container ">
        <div class="govuk-grid-row ">
            <div class="govuk-grid-column-three-quarters">
                <a href="/" class="govuk-back-link">Back to all projects</a>

            </div>
        </div>
        <div class="govuk-grid-row govuk-!-padding-top-5 govuk-!-padding-bottom-0">
            <div class="govuk-grid-column-three-quarters">
                <span class="govuk-body-s" data-testid="project-id-header">Project ID: @Model.Project.ProjectStatus.ProjectId</span>
                <h1 class="govuk-heading-xl govuk-!-margin-bottom-2" data-testid="project-title-header">@Model.Project.ProjectStatus.CurrentFreeSchoolName</h1>
                <p class="govuk-!-font-size-27 govuk-!-font-weight-bold">Project overview</p>
            </div>
        </div>
        <div class="govuk-grid-row govuk-!-padding-top-0 govuk-!-padding-bottom-5">
            <div class="govuk-grid-column-full">
            </div>
        </div>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <nav class="app-sub-navigation" aria-label="sub menu">

            <ul class="app-sub-navigation__list govuk-!-margin-top-6">
                <li class="app-sub-navigation__item">
                    <a class="app-sub-navigation__link" aria-current="page" href="@projectOverviewLink">Project overview</a>
                </li>
                <li class="app-sub-navigation__item">
                    <a class="app-sub-navigation__link" href="@taskListLink">Task list</a>
                </li>
                <li class="app-sub-navigation__item">
                    <a class="app-sub-navigation__link" href="#">Project notes</a>
                </li>
            </ul>

        </nav>
    </div>
</div>

<div class="govuk-grid-row">

    <div class="govuk-grid-column-full govuk-!-margin-top-5 govuk-!-margin-bottom-5">
        <h2 class="govuk-heading-l">Key project information</h2>
    </div>

    <div class="govuk-grid-column-one-half">

        <h3 class="govuk-heading-m">Project status</h3>

        <dl class="govuk-summary-list">
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Current free school name
                </dt>
                <dd class="govuk-summary-list__value" data-testid="free-school-name">
                    @{
                        RenderValue(@Model.Project.ProjectStatus.CurrentFreeSchoolName);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Project status
                </dt>
                <dd class="govuk-summary-list__value" data-testid="project-status">
                    @{
                        RenderValue(Model.Project.ProjectStatus.ProjectStatus);
                    }

                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Free schools application number
                </dt>
                <dd class="govuk-summary-list__value" data-testid="application-number">
                    @{
                        RenderValue(Model.Project.ProjectStatus.FreeSchoolsApplicationNumber);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Project ID
                </dt>
                <dd class="govuk-summary-list__value" data-testid="project-id">
                    @{
                        RenderValue(Model.Project.ProjectStatus.ProjectId);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    URN
                </dt>
                <dd class="govuk-summary-list__value" data-testid="urn">
                    @{
                        RenderValue(Model.Project.ProjectStatus.Urn);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Application wave
                </dt>
                <dd class="govuk-summary-list__value" data-testid="application-wave">
                    @{
                        RenderValue(Model.Project.ProjectStatus.ApplicationWave);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Realistic year of opening
                </dt>
                <dd class="govuk-summary-list__value" data-testid="realistic-year-of-opening">
                    @{
                        RenderValue(Model.Project.ProjectStatus.RealisticYearOfOpening);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Date of entry into pre-opening
                </dt>
                <dd class="govuk-summary-list__value" data-testid="date-of-entry-into-preopening">
                    @{
                        RenderValue(Model.Project.ProjectStatus.DateOfEntryIntoPreopening.ToDateString());
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Provisional opening date agreed with trust
                </dt>
                <dd class="govuk-summary-list__value" data-testid="provisional-opening-date-agreed-with-trust">
                    @{
                        RenderValue(Model.Project.ProjectStatus.ProvisionalOpeningDateAgreedWithTrust.ToDateString());
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Actual opening date
                </dt>
                <dd class="govuk-summary-list__value" data-testid="actual-opening-date">
                    @{
                        RenderValue(Model.Project.ProjectStatus.ActualOpeningDate);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Opening academic year
                </dt>
                <dd class="govuk-summary-list__value" data-testid="opening-academic-year">
                    @{
                        RenderValue(Model.Project.ProjectStatus.OpeningAcademicYear);
                    }
                </dd>

            </div>
        </dl>

    </div>

    <div class="govuk-grid-column-one-half">

        <h3 class="govuk-heading-m">School details</h3>

        <dl class="govuk-summary-list">
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Local authority
                </dt>
                <dd class="govuk-summary-list__value" data-testid="local-authority">
                    @{
                        RenderValue(Model.Project.SchoolDetails.LocalAuthority);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Region
                </dt>
                <dd class="govuk-summary-list__value" data-testid="region">
                    @{
                        RenderValue(Model.Project.SchoolDetails.Region);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Constituency
                </dt>
                <dd class="govuk-summary-list__value" data-testid="constituency">
                    @{
                        RenderValue(Model.Project.SchoolDetails.Constituency);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Constituency MP
                </dt>
                <dd class="govuk-summary-list__value" data-testid="constituency-mp">
                    @{
                        RenderValue(Model.Project.SchoolDetails.ConstituencyMp);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Number of forms of entry
                </dt>
                <dd class="govuk-summary-list__value" data-testid="number-of-forms-of-entry">
                    @{
                        RenderValue(Model.Project.SchoolDetails.NumberOfEntryForms);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    School type
                </dt>
                <dd class="govuk-summary-list__value" data-testid="school-type">
                    @{
                        RenderValue(Model.Project.SchoolDetails.SchoolType);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    School phase
                </dt>
                <dd class="govuk-summary-list__value" data-testid="school-phase">
                    @{
                        RenderValue(Model.Project.SchoolDetails.SchoolPhase);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Age range
                </dt>
                <dd class="govuk-summary-list__value" data-testid="age-range">
                    @{
                        RenderValue(Model.Project.SchoolDetails.AgeRange);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Gender
                </dt>
                <dd class="govuk-summary-list__value" data-testid="gender">
                    @{
                        RenderValue(Model.Project.SchoolDetails.Gender);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Nursery
                </dt>
                <dd class="govuk-summary-list__value" data-testid="nursery">
                    @{
                        RenderValue(Model.Project.SchoolDetails.Nursery);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Sixth form
                </dt>
                <dd class="govuk-summary-list__value" data-testid="sixth-form">
                    @{
                        RenderValue(Model.Project.SchoolDetails.SixthForm);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Independent converter
                </dt>
                <dd class="govuk-summary-list__value" data-testid="independent-converter">
                    @{
                        RenderValue(Model.Project.SchoolDetails.IndependentConverter);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Specialist Resource Provision
                </dt>
                <dd class="govuk-summary-list__value" data-testid="specalist-resource-provision">
                    @{
                        RenderValue(Model.Project.SchoolDetails.SpecialistResourceProvision);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Faith Status
                </dt>
                <dd class="govuk-summary-list__value" data-testid="faith-status">
                    @{
                        RenderValue(Model.Project.SchoolDetails.FaithStatus);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Faith type
                </dt>
                <dd class="govuk-summary-list__value" data-testid="faith-type">
                    @{
                        RenderValue(Model.Project.SchoolDetails.FaithType);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Trust ID
                </dt>
                <dd class="govuk-summary-list__value" data-testid="trust-id">
                    @{
                        RenderValue(Model.Project.SchoolDetails.TrustId);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Trust name
                </dt>
                <dd class="govuk-summary-list__value" data-testid="trust-name">
                    @{
                        RenderValue(Model.Project.SchoolDetails.TrustName);
                    }
                </dd>

            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Trust type
                </dt>
                <dd class="govuk-summary-list__value" data-testid="trust-type">
                    @{
                        RenderValue(Model.Project.SchoolDetails.TrustType);
                    }
                </dd>

            </div>


        </dl>
    </div>
</div>
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <h2 class="govuk-heading-l govuk-!-margin-top-9">Other information</h2>

        <div class="govuk-summary-card">
            <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">Risk rating and summary</h2><div class="govuk-summary-card__actions">
                    <a class="govuk-link" href="risk/summary" data-testid="change-project-risk">
                        Change<span class="govuk-visually-hidden"> Risk rating and summary</span>
                    </a>
                </div>
            </div>

            <div class="govuk-summary-card__content">
                <dl class="govuk-summary-list">

                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Date
                        </dt>
                        <dd class="govuk-summary-list__value" data-testid="project-risk-date">
                            @{
                                RenderValue(Model.Project.Risk.Date.ToDateString());
                            }
                        </dd>

                    </div>

                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Overall risk rating
                        </dt>
                        <dd class="govuk-summary-list__value" data-testid="project-risk-rating">
                            <govuk-risk-rating-label risk-rating="@Model.Project.Risk.RiskRating" />
                        </dd>
                    </div>

                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Overall risk summary
                        </dt>
                        <dd class="govuk-summary-list__value" data-testid="project-risk-summary">
                            @{
                                RenderValue(Model.Project.Risk.Summary);
                            }
                        </dd>
                    </div>


                </dl>
            </div>
        </div>
    </div>
</div>

@functions {
    public void RenderValue(string value)
    {
        if (string.IsNullOrEmpty(value))
        {
            <span class="empty">Empty</span>
        }
        else
        {
            @value
        }
    }
}